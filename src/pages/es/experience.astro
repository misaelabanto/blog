---
import { getCollection } from 'astro:content';
import { filterByLanguage, getLocalizedMeta } from '../../i18n/utils';
import Layout from '../../layouts/BlogPost.astro';

// Get Spanish experience data
const allExperience = await getCollection('experience');
const experiences = filterByLanguage(allExperience, 'es');

const meta = getLocalizedMeta('es');
---

<Layout
	title="Experiencia Profesional"
	description="Descubre mi trayectoria profesional como ingeniero de software, arquitecto de datos y l√≠der t√©cnico en startups y empresas fintech."
	pubDate={new Date('2024-01-01')}
	heroImage="/blog-placeholder-3.jpg"
>
	<h1>Experiencia Profesional</h1>
	
	<p class="text-lg text-gray-600 mb-8">
		M√°s de 8 a√±os construyendo sistemas escalables, liderando equipos t√©cnicos y 
		transformando ideas en productos que impactan a miles de usuarios.
	</p>

	<div class="space-y-12">
		{experiences.length > 0 ? (
			experiences.map((experience) => (
				<div class="border-l-4 border-primary pl-6 pb-8">
					<div class="flex flex-col lg:flex-row lg:items-start lg:justify-between mb-4">
						<div class="flex-1">
							<h2 class="text-2xl font-bold text-gray-900 mb-2">
								{experience.data.position}
							</h2>
							<h3 class="text-xl text-primary font-semibold mb-2">
								{experience.data.company}
							</h3>
							<p class="text-gray-600 mb-3">
								{experience.data.location}
							</p>
						</div>
						<div class="flex flex-col items-start lg:items-end text-sm text-gray-500">
							<span class="font-medium">
								{experience.data.startDate} - {experience.data.endDate}
							</span>
							<span class="bg-gray-100 px-2 py-1 rounded-full mt-2">
								{experience.data.type}
							</span>
						</div>
					</div>
					
					<p class="text-gray-700 mb-4 leading-relaxed">
						{experience.data.description}
					</p>
					
					{experience.data.achievements && experience.data.achievements.length > 0 && (
						<div class="mb-4">
							<h4 class="text-lg font-semibold mb-3 text-gray-800">
								Logros Principales:
							</h4>
							<ul class="space-y-2">
								{experience.data.achievements.map((achievement) => (
									<li class="flex items-start">
										<span class="text-primary mr-2 mt-1">‚Ä¢</span>
										<span class="text-gray-700">{achievement}</span>
									</li>
								))}
							</ul>
						</div>
					)}
					
					{experience.data.technologies && experience.data.technologies.length > 0 && (
						<div>
							<h4 class="text-lg font-semibold mb-3 text-gray-800">
								Tecnolog√≠as:
							</h4>
							<div class="flex flex-wrap gap-2">
								{experience.data.technologies.map((tech) => (
									<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-medium">
										{tech}
									</span>
								))}
							</div>
						</div>
					)}
				</div>
			))
		) : (
			<div class="text-center py-12">
				<h2 class="text-2xl font-bold text-gray-900 mb-4">
					Contenido en Desarrollo
				</h2>
				<p class="text-gray-600 mb-6">
					La versi√≥n en espa√±ol de mi experiencia profesional estar√° disponible pronto.
				</p>
				<a href="/experience" class="btn btn-primary">
					Ver en Ingl√©s
				</a>
			</div>
		)}
	</div>

	{experiences.length > 0 && (
		<div class="mt-16 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100">
			<h2 class="text-2xl font-bold text-gray-900 mb-4">
				¬øInteresado en Colaborar?
			</h2>
			<p class="text-gray-700 mb-4">
				Estoy siempre abierto a nuevas oportunidades y proyectos desafiantes. 
				Si buscas un l√≠der t√©cnico experimentado o quieres discutir una idea innovadora, 
				¬°me encantar√≠a conversar contigo!
			</p>
			<div class="flex gap-4 flex-wrap">
				<a href="mailto:hola@misaelabanto.com" class="btn btn-primary">
					üìß Cont√°ctame
				</a>
				<a href="https://linkedin.com/in/misaelabanto" target="_blank" class="btn btn-outline">
					üíº LinkedIn
				</a>
			</div>
		</div>
	)}
</Layout> 